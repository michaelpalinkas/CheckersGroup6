public class MinimaxSearch {
	
	public String minimaxDecision(GameState state, boolean minOrMax){

		if (minOrMax) { //maximizing, Black to play
			double vBest = -100;
			double v;
			String bestAction = "";
			
			for (String s : state.actions()) {
				
				v = minValue(state.result(s), 0);
				//System.out.println(s);
				//System.out.println("v: " + v);
				if (v > vBest) {
					vBest = v;
					bestAction = s;
				}
			}
			
			return bestAction;
		}
		else {	//minimizing, White to play
			double vBest = 100;
			double v;
			String bestAction = "";
			
			for (String s : state.actions()) {
				
				v = maxValue(state.result(s), 0);
				//System.out.println(s);
				//System.out.println("v: " + v);
				if (v < vBest) {
					vBest = v;
					bestAction = s;
				}
			}
			
			return bestAction;
		}		
	}
	
	public double minValue(GameState state, int depth){

		if (state.isTerminal())
			return state.utility(state.player());
		
		double v = 100;
		
		for (String s : state.actions()) {
			
			v = Math.min(v, maxValue(state.result(s), depth++));
		}
		
		return v;
	}
	
	public double maxValue(GameState state, int depth){

		if (state.isTerminal() || depth > 1000)
			return state.utility(state.player());
		
		double v = -100;
		
		for (String s : state.actions()) {
			
			v = Math.max(v, minValue(state.result(s), depth++));
		}
			
		return v;
	}
}